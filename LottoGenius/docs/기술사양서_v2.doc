<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    body { font-family: 'Malgun Gothic', sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; }
    h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 15px; margin-bottom: 30px; }
    h2 { color: #2980b9; border-left: 5px solid #2980b9; padding-left: 12px; margin-top: 40px; background-color: #f4f6f7; padding: 10px; }
    h3 { color: #16a085; margin-top: 25px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.95em; }
    th, td { border: 1px solid #bdc3c7; padding: 12px; text-align: left; }
    th { background-color: #ecf0f1; font-weight: bold; color: #2c3e50; }
    code { background-color: #f8f9fa; padding: 3px 6px; border-radius: 4px; font-family: Consolas, monospace; color: #e74c3c; border: 1px solid #e1e1e8; }
    .structure { background-color: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 8px; font-family: Consolas, monospace; white-space: pre; overflow-x: auto; font-size: 0.9em; line-height: 1.4; }
    .badge { display: inline-block; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; font-weight: bold; color: white; }
    .new { background-color: #27ae60; }
    .update { background-color: #f39c12; }
</style>
</head>
<body>
    <h1>Lotto Genius v2.0 - 기술 사양서</h1>
    <p><strong>버전:</strong> 2.0 (Refactored) | <strong>작성일:</strong> 2026-01-14</p>
    
    <h2>1. 개요 (Overview)</h2>
    <p>Lotto Genius는 과거 로또 당첨 데이터를 과학적으로 분석하여 최적의 번호를 추천하고, 시각화된 통계 정보를 제공하는 웹 애플리케이션입니다. <span class="badge update">v2.0</span>에서는 대규모 리팩토링을 통해 엔터프라이즈급 아키텍처와 고성능 DB를 도입했습니다.</p>

    <h2>2. 시스템 아키텍처 (Architecture)</h2>
    
    <h3>2.1 기술 스택 (Tech Stack)</h3>
    <table>
        <tr><th width="20%">구분</th><th>기술 / 도구</th><th>비고</th></tr>
        <tr><td><strong>Frontend</strong></td><td>React, Tailwind CSS, Recharts, Axios</td><td>SPA, 반응형 UI, 데이터 시각화</td></tr>
        <tr><td><strong>Backend</strong></td><td>FastAPI (Python 3.13)</td><td>REST API, 비동기 처리</td></tr>
        <tr><td><strong>Database</strong></td><td><span class="badge new">SQLite</span> (SQLAlchemy ORM)</td><td>기존 Excel에서 마이그레이션 완료</td></tr>
        <tr><td><strong>Pattern</strong></td><td>Layered Architecture</td><td>Controller-Service-Repository 패턴 적용</td></tr>
    </table>

    <h3>2.2 폴더 구조 (Directory Structure)</h3>
    <div class="structure">
LottoGenius/
├── backend/
│   ├── api/v1/routers/  # API 엔드포인트 (Controller)
│   ├── core/            # 설정 및 상수
│   ├── crud/            # DB 쿼리 로직 (Repository)
│   ├── models/          # DB 테이블 정의 (ORM)
│   ├── schemas/         # 데이터 검증 모델 (Pydantic)
│   ├── services/        # 비즈니스 로직 (번호 생성 알고리즘)
│   └── main.py          # 앱 진입점
├── frontend/            # React 소스코드
├── data/
│   └── lotto.db         # SQLite 데이터베이스 파일
└── docs/                # 프로젝트 문서
    </div>

    <h2>3. 주요 기능 (Features)</h2>
    
    <h3>3.1 지능형 번호 생성</h3>
    <ul>
        <li><strong>가중치 알고리즘:</strong> 최근 N회차(최대 전체) 빈도 분석 기반의 가중치 랜덤 추천.</li>
        <li><strong>필터링:</strong> 고정수(포함) 및 제외수 설정 기능.</li>
        <li><strong>반자동 모드:</strong> 사용자가 수동으로 일부 번호를 선택하고 나머지를 AI가 채워주는 기능. <span class="badge new">New</span></li>
    </ul>

    <h3>3.2 데이터 시각화 (Statistics)</h3>
    <ul>
        <li><strong>빈도 분석:</strong> 최근 회차에서 가장 많이 나온 번호 Top 10 (Bar Chart).</li>
        <li><strong>구간 분석:</strong> 1번대, 10번대 등 번호 대역별 출현 비율 (Pie Chart).</li>
    </ul>

    <h3>3.3 데이터 관리</h3>
    <ul>
        <li><strong>DB 기반:</strong> SQLite를 도입하여 데이터 무결성 보장 및 조회 속도 향상.</li>
        <li><strong>수동 업데이트:</strong> 관리자가 최신 회차 정보를 직접 DB에 추가하는 기능 제공.</li>
    </ul>

    <h2>4. 인터페이스 (API Specification)</h2>
    <table>
        <tr><th>Method</th><th>Endpoint</th><th>설명</th></tr>
        <tr><td>GET</td><td><code>/api/latest-round</code></td><td>최신 회차 번호 조회</td></tr>
        <tr><td>POST</td><td><code>/api/generate</code></td><td>조건에 따른 로또 번호 생성</td></tr>
        <tr><td>GET</td><td><code>/api/stats</code></td><td>통계 데이터 (빈도, 구간분포) 조회</td></tr>
        <tr><td>POST</td><td><code>/api/add-round</code></td><td>새로운 회차 정보 DB 저장</td></tr>
    </table>

    <h2>5. 설치 및 실행 (Setup)</h2>
    <h3>Backend</h3>
    <code>cd LottoGenius</code><br>
    <code>python -m uvicorn backend.main:app --reload --host 0.0.0.0</code>

    <h3>Frontend</h3>
    <code>cd LottoGenius/frontend</code><br>
    <code>npm run dev -- --host</code>

</body>
</html>
