<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    body { font-family: 'Malgun Gothic', sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; }
    h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 15px; margin-bottom: 30px; }
    h2 { color: #2980b9; border-left: 5px solid #2980b9; padding-left: 12px; margin-top: 40px; background-color: #f4f6f7; padding: 10px; }
    h3 { color: #16a085; margin-top: 25px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.95em; }
    th, td { border: 1px solid #bdc3c7; padding: 12px; text-align: left; }
    th { background-color: #ecf0f1; font-weight: bold; color: #2c3e50; }
    code { background-color: #f8f9fa; padding: 3px 6px; border-radius: 4px; font-family: Consolas, monospace; color: #e74c3c; border: 1px solid #e1e1e8; }
    .structure { background-color: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 8px; font-family: Consolas, monospace; white-space: pre; overflow-x: auto; font-size: 0.9em; line-height: 1.4; }
    .badge { display: inline-block; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; font-weight: bold; color: white; margin-right: 5px; }
    .refactor { background-color: #9b59b6; }
    .new { background-color: #27ae60; }
</style>
</head>
<body>
    <h1>Lotto Genius v2.3 - 기술 사양서 (Production Ready)</h1>
    <p><strong>버전:</strong> 2.3 (Final Polish) | <strong>최종 수정일:</strong> 2026-01-14</p>
    
    <h2>1. 개요 (Overview)</h2>
    <p>Lotto Genius는 데이터 기반의 가중치 분석과 현실적인 패턴 필터링 알고리즘을 결합하여 최적의 로또 번호를 추천하는 지능형 웹 애플리케이션입니다. v2.3에서는 유지보수성과 확장성을 고려하여 코드 베이스를 전면 리팩토링했습니다.</p>

    <h2>2. 시스템 아키텍처 (Architecture)</h2>
    
    <h3>2.1 Frontend Structure <span class="badge refactor">Refactored</span></h3>
    <p>단일 파일 구조에서 컴포넌트 기반 아키텍처로 전환하여 재사용성과 가독성을 높였습니다.</p>
    <div class="structure">
src/
├── components/
│   ├── NumberGrid.jsx      # 번호 선택 UI (고정수/제외수)
│   ├── GameList.jsx        # 생성된 게임 목록 및 이미지 저장
│   ├── StatsDashboard.jsx  # 통계 차트 (Recharts)
│   └── UserGuide.jsx       # 사용자 가이드 탭
├── App.jsx                 # 메인 레이아웃 및 상태 관리
└── ...
    </div>

    <h3>2.2 Backend Structure</h3>
    <p>Layered Architecture를 준수하며, 설정값과 비즈니스 로직을 분리했습니다.</p>
    <div class="structure">
backend/
├── api/v1/routers/  # Controller
├── core/            # Config & Constants (필터링 임계값 관리)
├── crud/            # Database Access
├── services/        # Business Logic (AI 필터링, 캐싱)
└── schemas/         # DTO (Pydantic Models)
    </div>

    <h2>3. 핵심 알고리즘 (Smart Filtering)</h2>
    <ul>
        <li><strong>연속 번호 제한:</strong> 3개 이상 연속된 숫자 발생 시 자동 재생성.</li>
        <li><strong>구간 쏠림 방지:</strong> 특정 번호대(10단위) 쏠림 현상 방지.</li>
        <li><strong>홀짝/총합 필터:</strong> 비현실적인 비율 및 총합 범위 제외.</li>
        <li><strong>설정 중앙화:</strong> 모든 임계값(Threshold)은 <code>core/constants.py</code>에서 관리.</li>
    </ul>

    <h2>4. 주요 기능 (Features)</h2>
    <ul>
        <li><strong>통계 시각화:</strong> 최다/최소 당첨 번호 및 구간 분포 차트 제공.</li>
        <li><strong>이미지 저장:</strong> <code>html2canvas</code>를 이용한 고해상도 추천 번호 이미지 다운로드.</li>
        <li><strong>성능 최적화:</strong> 인메모리 캐싱 도입으로 응답 속도 0.1초 미만 보장.</li>
    </ul>

    <h2>5. 배포 (Deployment)</h2>
    <ul>
        <li><strong>Frontend:</strong> Netlify (GitHub CI/CD)</li>
        <li><strong>Backend:</strong> Render (Python 3.13, Auto-Migration)</li>
        <li><strong>Database:</strong> PostgreSQL (Production) / SQLite (Local)</li>
    </ul>

    <p style="margin-top: 50px; text-align: center; color: #7f8c8d; font-size: 0.85em;">© 2026 Lotto Genius Project Team. All Rights Reserved.</p>
</body>
</html>