<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    body { font-family: 'Malgun Gothic', sans-serif; line-height: 1.6; color: #333; }
    h1 { color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; }
    h2 { color: #34495e; border-left: 5px solid #34495e; padding-left: 10px; margin-top: 30px; }
    h3 { color: #2980b9; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { bg-color: #f2f2f2; font-weight: bold; }
    code { background-color: #f8f9fa; padding: 2px 4px; border-radius: 4px; font-family: Consolas, monospace; }
    .diagram { background-color: #fdfdfd; border: 1px dashed #ccc; padding: 15px; font-family: monospace; white-space: pre; }
</style>
</head>
<body>
    <h1>Lotto Genius - 기술 사양서 (Technical Specification)</h1>
    <p>본 문서는 <strong>Lotto Genius</strong> 웹 애플리케이션의 아키텍처, 데이터 플로우, 인터페이스 및 배포 요구사항을 정의합니다.</p>

    <h2>1. 시스템 개요 (System Overview)</h2>
    <ul>
        <li><strong>프로젝트명:</strong> Lotto Genius (로또 지니어스)</li>
        <li><strong>목적:</strong> 과거 로또 당첨 데이터를 분석하여 가중치 기반의 추천 번호를 생성하고 관리하는 웹 시스템.</li>
        <li><strong>핵심 기능:</strong> 가중치 기반 번호 생성, 고정수/제외수 설정, 엑셀 데이터 자동/수동 업데이트.</li>
    </ul>

    <h2>2. 시스템 아키텍처 (System Architecture)</h2>
    <h3>2.1 기술 스택 (Tech Stack)</h3>
    <table>
        <tr><th>구분</th><th>기술 / 도구</th><th>비고</th></tr>
        <tr><td>Frontend</td><td>React (Vite), Tailwind CSS</td><td>UI/UX</td></tr>
        <tr><td>Backend</td><td>FastAPI (Python)</td><td>REST API Server</td></tr>
        <tr><td>Database</td><td>Excel (.xlsx)</td><td>로컬 파일 DB</td></tr>
        <tr><td>Library</td><td>Pandas, OpenPyXL, Axios</td><td>데이터 처리 및 통신</td></tr>
    </table>

    <h3>2.2 시스템 구조</h3>
    <div class="diagram">
[User Interface (React)] <--> [API Server (FastAPI)] <--> [Data Store (Excel)]
                                      ^
                                      |
                             [External API (DHLottery)]
    </div>

    <h2>3. 데이터 플로우 (Data Flow)</h2>
    <h3>3.1 번호 생성 로직</h3>
    <p>사용자의 요청이 들어오면 백엔드는 엑셀 파일의 최근 당첨 번호들을 분석하여 각 숫자별 출현 빈도를 계산합니다. 이 빈도수를 가중치로 활용하여 <code>random.choices</code> 함수를 통해 5개 세트의 번호를 랜덤 추출합니다.</p>

    <h3>3.2 데이터 업데이트 (Hybrid)</h3>
    <p>자동 업데이트 시도 시 동행복권 API를 호출하며, API 차단이나 미발표 등으로 실패할 경우 프론트엔드에서 수동 입력 폼을 활성화하여 사용자가 직접 데이터를 보정할 수 있도록 설계되었습니다.</p>

    <h2>4. 인터페이스 정의 (API Specification)</h2>
    <table>
        <tr><th>Method</th><th>Endpoint</th><th>설명</th></tr>
        <tr><td>GET</td><td>/api/latest-round</td><td>저장된 최신 회차 조회</td></tr>
        <tr><td>POST</td><td>/api/generate</td><td>조건 기반 추천 번호 생성</td></tr>
        <tr><td>POST</td><td>/api/add-round</td><td>회차 정보 추가 (자동/수동)</td></tr>
    </table>

    <h2>5. 배포 및 실행 요구사항</h2>
    <h3>5.1 하드웨어/소프트웨어 요구사항</h3>
    <ul>
        <li>OS: Windows 10/11</li>
        <li>Python 3.8+, Node.js 18+</li>
        <li>네트워크: 동일 WiFi/LAN 내 사설 IP 통신 가능 환경</li>
    </ul>
    <h3>5.2 실행 방법</h3>
    <p>백엔드: <code>python -m uvicorn main:app --host 0.0.0.0 --port 8000</code><br>
    프론트엔드: <code>npm run dev -- --host</code></p>

    <h2>6. 향후 개선 사항</h2>
    <ul>
        <li>데이터 누적에 따른 SQLite DB 마이그레이션</li>
        <li>Docker 기반 컨테이너화 배포</li>
        <li>다양한 통계 분석 차트(Chart.js) 추가</li>
    </ul>

    <p style="margin-top: 50px; font-size: 0.8em; color: #888;">작성일: 2026-01-13 | Lotto Genius Project Team</p>
</body>
</html>
